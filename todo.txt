akce je objekt s daty: action = type: ADD_STATEMENT, text: 'novej statement'
akce se posilaji do storu (store.dispatch(≤action≥))
store je tvoreny reducerama, drzi stav; cteni: store.getState(); zapis: store.dispatch
reducer obdrzi state a akci
reducer vytvari novy state
nad storem posloucha provider (react-redux)
pri zmene storu provider obvola komponenty

reducer nema side effecty - nevola API, neroutuje, nevytvari Date, Math

nemusim se vzdy ptat na filter, kdyz uz mam ty statements natahany
kdyz zaviram strom, tak musim zavrit i vsechny potomky
API::getEntities by se melo dit az nakonec v public metode. Celou dobu chci jinak pracovat s tim, co mi vrati DB


structure [ [ '2', '7', '9' ], [ '3', '4', '8' ], [ '5', '6' ] ]


remove
	smazat tohle id plus vsechny childy
	pokud tohle id nebo nektery child existuje ve stromu i jinde, smazu to id pouze ze stromu
	if parentId
		id = 4
		parentId = 2
		children = select descendant where ancestor = 4 and depth = 1
		children [5, 6]
		delete from closure where ancestor is 2 and descendant = 4 OR descendant in children

tvrdim.cz/login
tvrdim.cz/login/facebook
tvrdim.cz/login/facebook/return
tvrdim.cz/login/gmail
tvrdim.cz/profile


Kliknu na FE na login pres FB
	- dispatch loginStart
otevre se FB stranka
	- to same okno nebo jiny tab?
po uspesnym zalogovani se redirectuju na cb url
	/login/facebook/return?code=<kod>
passport pote zavola FB endpoint pro dokonceni loginu
	jako parametr posle secretID a code a zpatky dostane token
BE me presmeruje na stranku po zalogovani
	- dispatch loginSuccess
	- zmeni se login button na user name

kdyz presmeruju na fb login, tak mi zmizi state?
mam rozepsany agree argument a jdu do settings
	zustane to rozepsany?

users
	id
	social_id
statement
	id
	user_id - kazdy statement patri k jednomu uzivateli
	- co kdyz chci sledovat statement?

online
	not logged
		- muzu ukladat
			- vytvorim statement bez userId
				- to bude CSS viditelny
			- dispatch sync action
				- ulozi celou akci do stacku, ktery se provede az budu online/logged
			- ukladam state do localStorage
		- nemuzu ukladat

offline
	logged

po zalogovani
	- sync localStorage
		- projit vsechny ze sync statu a ukladat na BE
		- pri chybe sync zrusit

sync state
	add: {action}

akce pro ukladani na server:
	statement
		- insert
		- update
		- delete
	layout
		- nic
	user
		- nic
		- zakazat zmenu udaju







